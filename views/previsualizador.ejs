<%- layout('layouts/adminLayout') %>

<div class="container-fluid"> <!-- Añadido container-fluid para consistencia -->
    <!-- Mensajes Flash -->
    <% if (successMessage) { %>
        <div class="alert alert-success mt-3" role="alert">
            <%= successMessage %>
        </div>
    <% } %>
    <% if (errorMessage) { %>
        <div class="alert alert-danger mt-3" role="alert">
            <%= errorMessage %>
        </div>
    <% } %>

    <form action="/admin/previsualizador" method="post" class="mt-3">
        <div class="mb-3"> <!-- Cambiado mb-2 a mb-3 para más espacio -->
            <label for="prompt" class="form-label">Prompt para la IA:</label>
            <textarea class="form-control" id="prompt" name="prompt" rows="5" placeholder="Ej: Crea una landing page simple para una tienda de café llamada 'El Grano Feliz'. Incluye un título, un párrafo de bienvenida y una imagen placeholder."></textarea> <!-- Aumentado rows a 5 y añadido placeholder -->
        </div>
        <button type="submit" class="btn btn-primary">Enviar Prompt a IA</button> <!-- Texto del botón actualizado -->
    </form>

    <% if (apiResponseData) { %>
        <div class="mt-4">
            <h4>Respuesta de la API:</h4>
            <pre><code style="white-space: pre-wrap; word-break: break-all;"><%= apiResponseData %></code></pre>
        </div>
    <% } %>

    <% if (previewUrl) { %>
        <div class="mt-4"> 
            <h4>Previsualización del Archivo Generado (si aplica):</h4>
            <iframe src="<%= previewUrl %>" width="100%" height="600px" style="border: 1px solid #ccc;"></iframe>
        </div>
    <% } else if (!apiResponseData) { %> <!-- Solo mostrar placeholder si no hay ni apiResponseData ni previewUrl -->
        <div class="mt-4 text-center">
             <img src="/images/avatar.svg" alt="Previsualizador" style="width: 200px; opacity: 0.5;">
            <p class="mt-2">La respuesta de la IA o la previsualización aparecerá aquí.</p>
        </div>
    <% } %>
</div>
